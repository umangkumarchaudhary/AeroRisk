ğŸ§  Phase 4: ML Models - Problem Statements
Problem 1: Risk Prediction (XGBoost)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GOAL: Predict how RISKY a flight/operation will be (0-100)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  INPUT FEATURES:                                                â”‚
â”‚  â”œâ”€â”€ Weather: visibility, wind_speed, weather_risk_score       â”‚
â”‚  â”œâ”€â”€ Aircraft: type, age, maintenance status                   â”‚
â”‚  â”œâ”€â”€ Crew: duty_hours, rest_hours, fatigue_index               â”‚
â”‚  â”œâ”€â”€ Schedule: turnaround_time, delays                         â”‚
â”‚  â””â”€â”€ Historical: past incidents at this airport/route          â”‚
â”‚                                                                 â”‚
â”‚  OUTPUT:                                                        â”‚
â”‚  â””â”€â”€ risk_score: 0-100 (higher = more dangerous)               â”‚
â”‚                                                                 â”‚
â”‚  MODEL: XGBoost Regressor                                       â”‚
â”‚  WHY: Good with tabular data, handles missing values            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Your Task:

Load the transformed features from Parquet files
Create training features (X) and target (y = injury_score or severity_code)
Train XGBoost model
Evaluate with RMSE, RÂ²
Save model to models/ folder

*things left 
Add more weather features from weather_data JSON
Add aircraft type encoding
Add location-based features


Problem 2: Severity Classification (LightGBM)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GOAL: Classify severity into 4 categories                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  INPUT: Same features as Problem 1                             â”‚
â”‚                                                                 â”‚
â”‚  OUTPUT (multi-class):                                          â”‚
â”‚  â”œâ”€â”€ 0 = NONE     (no injuries)                                â”‚
â”‚  â”œâ”€â”€ 1 = MINOR    (minor injuries)                             â”‚
â”‚  â”œâ”€â”€ 2 = SERIOUS  (serious injuries)                           â”‚
â”‚  â””â”€â”€ 3 = FATAL    (fatalities)                                 â”‚
â”‚                                                                 â”‚
â”‚  MODEL: LightGBM Classifier                                     â”‚
â”‚  WHY: Fast, handles imbalanced classes well                     â”‚
â”‚                                                                 â”‚
â”‚  CHALLENGE: Class imbalance!                                    â”‚
â”‚  â”œâ”€â”€ NONE:    20,000+ records                                  â”‚
â”‚  â”œâ”€â”€ FATAL:   ~6,000 records                                   â”‚
â”‚  â””â”€â”€ Need: class_weight or SMOTE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Your Task:

Encode severity as 0,1,2,3
Handle class imbalance (use class_weight='balanced')
Train LightGBM classifier
Evaluate with confusion matrix, F1-score
Save model

Problem 3: Anomaly Detection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GOAL: Find unusual/suspicious operational patterns            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  USE CASE: "This flight's risk factors look abnormal!"         â”‚
â”‚                                                                 â”‚
â”‚  INPUT: Operational features                                    â”‚
â”‚  â”œâ”€â”€ crew_fatigue_index                                        â”‚
â”‚  â”œâ”€â”€ maintenance_risk                                          â”‚
â”‚  â”œâ”€â”€ schedule_deviation                                        â”‚
â”‚  â””â”€â”€ weather_risk                                              â”‚
â”‚                                                                 â”‚
â”‚  MODEL OPTIONS:                                                 â”‚
â”‚  â”œâ”€â”€ Isolation Forest (unsupervised)                           â”‚
â”‚  â”œâ”€â”€ Local Outlier Factor                                      â”‚
â”‚  â””â”€â”€ One-Class SVM                                             â”‚
â”‚                                                                 â”‚
â”‚  OUTPUT:                                                        â”‚
â”‚  â”œâ”€â”€ is_anomaly: True/False                                    â”‚
â”‚  â””â”€â”€ anomaly_score: How abnormal (-1 to 0)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Your Task:

Use Isolation Forest from sklearn
Fit on operational data features
Predict anomalies
Find the weirdest 5% of operations
Problem 4: SHAP Explainability
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GOAL: Explain WHY a prediction was made                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  QUESTION: "Why is this flight rated HIGH RISK?"               â”‚
â”‚                                                                 â”‚
â”‚  SHAP VALUES tell you:                                          â”‚
â”‚  â”œâ”€â”€ "wind_speed=30kt contributed +15 to risk"                 â”‚
â”‚  â”œâ”€â”€ "pilot_experience=5000hrs contributed -10 to risk"        â”‚
â”‚  â””â”€â”€ "visibility=500m contributed +25 to risk"                 â”‚
â”‚                                                                 â”‚
â”‚  VISUALIZATIONS:                                                â”‚
â”‚  â”œâ”€â”€ Summary plot (which features matter most globally)        â”‚
â”‚  â”œâ”€â”€ Waterfall plot (explain single prediction)                â”‚
â”‚  â””â”€â”€ Force plot (interactive explanation)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Your Task:

Install: pip install shap
Load trained XGBoost model
Create SHAP explainer
Generate plots
Problem 5: Recommendation Engine
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GOAL: Generate actionable safety recommendations              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  INPUT: Risk prediction + SHAP values                          â”‚
â”‚                                                                 â”‚
â”‚  LOGIC:                                                         â”‚
â”‚  IF weather_risk > 70:                                         â”‚
â”‚     â†’ "Delay flight until weather improves"                    â”‚
â”‚  IF crew_fatigue > 80:                                         â”‚
â”‚     â†’ "Replace crew with well-rested pilots"                   â”‚
â”‚  IF maintenance_overdue = True:                                â”‚
â”‚     â†’ "Complete maintenance before flight"                     â”‚
â”‚                                                                 â”‚
â”‚  OUTPUT:                                                        â”‚
â”‚  â”œâ”€â”€ Recommendation title                                      â”‚
â”‚  â”œâ”€â”€ Expected risk reduction (%)                               â”‚
â”‚  â”œâ”€â”€ Priority (LOW/MEDIUM/HIGH/CRITICAL)                       â”‚
â”‚  â””â”€â”€ Implementation cost ($-$$$$)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ“‚ Where to Put Your Code
aerorisk/
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ feature_engineering.ipynb    â† Start here! Explore data
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ models/
â”‚       â”œâ”€â”€ risk_predictor.py        â† XGBoost model
â”‚       â”œâ”€â”€ severity_classifier.py   â† LightGBM model
â”‚       â”œâ”€â”€ anomaly_detector.py      â† Isolation Forest
â”‚       â””â”€â”€ explainer.py             â† SHAP wrapper
â”‚
â””â”€â”€ models/
    â”œâ”€â”€ xgboost_risk_v1.pkl          â† Saved model files
    â””â”€â”€ lightgbm_severity_v1.pkl
ğŸš€ Getting Started
I suggest you start with a Jupyter Notebook to explore the data:

python
# Load your transformed features
import pandas as pd
# These files were created by run_etl.py
incidents = pd.read_parquet('data/processed/incident_features_latest.parquet')
operations = pd.read_parquet('data/processed/operational_features_latest.parquet')
# Look at what you have
print(incidents.columns.tolist())
print(incidents.shape)
print(incidents['severity'].value_counts())
